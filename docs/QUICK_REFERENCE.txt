â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    ğŸš€ NovaChain Plugin - Quick Reference                    â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                              â•‘
â•‘  ğŸ“ API ENDPOINT                                                             â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â•‘
â•‘  https://mjeqsapfdnpufhkquzhn.supabase.co/functions/v1/                     â•‘
â•‘    external-energy-transfer                                                  â•‘
â•‘                                                                              â•‘
â•‘  ğŸ” AUTHENTICATION                                                           â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â•‘
â•‘  Header: x-api-key: <your-secret-key>                                       â•‘
â•‘                                                                              â•‘
â•‘  âš™ï¸  SETUP SCHRITTE                                                          â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â•‘
â•‘  1. API Key generieren:                                                      â•‘
â•‘     $ openssl rand -hex 32                                                   â•‘
â•‘                                                                              â•‘
â•‘  2. Supabase Secret setzen:                                                  â•‘
â•‘     $ npx supabase secrets set \                                             â•‘
â•‘       EXTERNAL_TRANSFER_API_KEY=<generated-key>                              â•‘
â•‘                                                                              â•‘
â•‘  3. Discourse Admin Settings:                                                â•‘
â•‘     URL: https://nova-chain.io/admin/site_settings/category/plugins         â•‘
â•‘     - novachain_enabled: âœ… aktiviert                                        â•‘
â•‘     - novachain_api_key: <same-generated-key>                                â•‘
â•‘                                                                              â•‘
â•‘  âš¡ ENERGY POINTS SYSTEM                                                     â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â•‘
â•‘  Topic erstellen:        +5 EP                                               â•‘
â•‘  Post erstellen:         +3 EP                                               â•‘
â•‘  Solution accepted:      +8 EP                                               â•‘
â•‘  Badge erhalten:         +4 EP                                               â•‘
â•‘  Like vergeben:          +2 EP                                               â•‘
â•‘  Like erhalten:          +1 EP                                               â•‘
â•‘  Daily Visit:            +1 EP                                               â•‘
â•‘                                                                              â•‘
â•‘  ğŸ”„ AUTO-TRANSFER                                                            â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â•‘
â•‘  Schwellwert: 5000 EP                                                        â•‘
â•‘  Trigger:     Automatisch nach jeder AktivitÃ¤t                               â•‘
â•‘  Bedingung:   User muss Wallet verknÃ¼pft haben                               â•‘
â•‘                                                                              â•‘
â•‘  ğŸ“ REQUEST FORMAT                                                           â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â•‘
â•‘  {                                                                           â•‘
â•‘    "action": "transfer",                                                     â•‘
â•‘    "wallet_address": "0xeb3c3cb8df4b76e88739db345fb92bd38e6840d3",           â•‘
â•‘    "energy_amount": 5000,                                                    â•‘
â•‘    "user_id": 123,                                                           â•‘
â•‘    "username": "joe69",                                                      â•‘
â•‘    "timestamp": 1727823456,                                                  â•‘
â•‘    "source": "discourse_forum"                                               â•‘
â•‘  }                                                                           â•‘
â•‘                                                                              â•‘
â•‘  âœ… SUCCESS RESPONSE                                                         â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â•‘
â•‘  {                                                                           â•‘
â•‘    "success": true,                                                          â•‘
â•‘    "message": "Energy points transferred successfully",                      â•‘
â•‘    "data": {                                                                 â•‘
â•‘      "wallet_address": "0x...",                                              â•‘
â•‘      "previous_balance": 1000,                                               â•‘
â•‘      "transferred_amount": 5000,                                             â•‘
â•‘      "new_balance": 6000                                                     â•‘
â•‘    }                                                                         â•‘
â•‘  }                                                                           â•‘
â•‘                                                                              â•‘
â•‘  ğŸ” MONITORING                                                               â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â•‘
â•‘  Plugin Logs:                                                                â•‘
â•‘  $ sudo docker exec app tail -f \                                            â•‘
â•‘    /var/www/discourse/log/production.log | grep NovaChain                    â•‘
â•‘                                                                              â•‘
â•‘  Transfer Logs:                                                              â•‘
â•‘  $ sudo docker exec app tail -f \                                            â•‘
â•‘    /var/www/discourse/log/production.log | grep AUTO-TRANSFER                â•‘
â•‘                                                                              â•‘
â•‘  Supabase Query:                                                             â•‘
â•‘  SELECT * FROM energy_actions                                                â•‘
â•‘  WHERE action_key = 'external_transfer'                                      â•‘
â•‘  ORDER BY created_at DESC;                                                   â•‘
â•‘                                                                              â•‘
â•‘  ğŸ§ª TESTING                                                                  â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â•‘
â•‘  cURL Test:                                                                  â•‘
â•‘  $ curl -X POST \                                                            â•‘
â•‘    https://mjeqsapfdnpufhkquzhn.supabase.co/functions/v1/\                   â•‘
â•‘    external-energy-transfer \                                                â•‘
â•‘    -H "Content-Type: application/json" \                                     â•‘
â•‘    -H "x-api-key: YOUR_KEY" \                                                â•‘
â•‘    -d '{"action":"transfer","wallet_address":"0x...","energy_amount":100}'   â•‘
â•‘                                                                              â•‘
â•‘  Python Test:                                                                â•‘
â•‘  $ cd /opt/novachain-community                                               â•‘
â•‘  $ python3 test_external_transfer.py                                         â•‘
â•‘                                                                              â•‘
â•‘  ğŸ› ï¸  COMMON ISSUES                                                           â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â•‘
â•‘  401 Unauthorized:                                                           â•‘
â•‘    â†’ API Key falsch/nicht gesetzt                                            â•‘
â•‘    â†’ PrÃ¼fe Supabase Secret + Discourse Setting                               â•‘
â•‘                                                                              â•‘
â•‘  400 Bad Request:                                                            â•‘
â•‘    â†’ Required fields fehlen (wallet_address/energy_amount/source)            â•‘
â•‘    â†’ Amount > 10000 (API Limit)                                              â•‘
â•‘                                                                              â•‘
â•‘  Transfer nicht ausgelÃ¶st:                                                   â•‘
â•‘    â†’ User hat keine Wallet verknÃ¼pft                                         â•‘
â•‘    â†’ POST /novachain/link-wallet {"wallet_address": "0x..."}                 â•‘
â•‘                                                                              â•‘
â•‘  ğŸ“š DOCUMENTATION                                                            â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â•‘
â•‘  - EXTERNAL_TRANSFER_UPDATE.md  (VollstÃ¤ndige Anleitung)                     â•‘
â•‘  - test_external_transfer.py    (Automatisierte Tests)                       â•‘
â•‘  - Plugin: /var/www/discourse/plugins/discourse-novachain-plugin/            â•‘
â•‘                                                                              â•‘
â•‘  ğŸš€ STATUS                                                                   â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â•‘
â•‘  Plugin Version:  1.1.0                                                      â•‘
â•‘  API Status:      âœ… Deployed & Ready                                        â•‘
â•‘  Last Update:     2025-10-02                                                 â•‘
â•‘  Unicorn PID:     414410                                                     â•‘
â•‘                                                                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
